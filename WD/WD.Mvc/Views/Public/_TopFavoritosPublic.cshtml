@model List<WD.Mvc.Models.FavoritoClimaViewModel>
@{
    var unitSymbol = (ViewBag.TempUnitSymbol as string) ?? "°C";
    var apiUnits = unitSymbol.Contains("F") ? "imperial" : "metric";
}
<div class="row row-cols-1 row-cols-md-3 g-3">
@foreach (var fav in Model)
{
    <div class="col">
        <div class="card shadow h-100 glass-card" style="border-radius: 15px;">
            <div class="card-body">
                <h5 class="card-title text-success fw-bold">@fav.Favorito.Ciudad, @fav.Favorito.Pais</h5>
                @if (!string.IsNullOrWhiteSpace(fav.Favorito.Descripcion))
                {
                    <p class="card-text text-white"><strong>Descripción:</strong> @fav.Favorito.Descripcion</p>
                }
                <div class="mb-2">
                    @if (fav.Temperatura != null) { <span class="me-3"><strong>Temp:</strong> @fav.Temperatura @unitSymbol</span> }
                    @if (fav.Humedad != null) { <span class="me-3"><strong>Humedad:</strong> @fav.Humedad%</span> }
                    @if (!string.IsNullOrWhiteSpace(fav.WeatherDescription)) { <span class="me-3"><strong>Clima:</strong> @fav.WeatherDescription</span> }
                </div>
                <button type="button"
                        class="btn btn-sm btn-primary ver-clima-btn"
                        data-ciudad="@fav.Favorito.Ciudad"
                        data-pais="@fav.Favorito.Pais"
                        data-units="@apiUnits"
                        data-bs-toggle="modal"
                        data-bs-target="#weatherDetailsModal">
                    Ver Clima
                </button>
            </div>
        </div>
    </div>
}
</div>